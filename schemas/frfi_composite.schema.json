{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "frfi_composite",
  "type": "object",
  "description": "Composite snapshot for Fed Rate Fragility Index",
  "required": ["snapshot_id", "frfi", "components"],
  "properties": {
    "snapshot_id": { "type": "string", "pattern": "^FRFI_\\d{8}$" },
    "frfi": {
      "type": "object",
      "required": ["composite", "signal"],
      "properties": {
        "composite": { "type": "integer", "minimum": 0, "maximum": 100 },
        "signal": { "enum": ["LOW", "MODERATE", "ELEVATED", "CRITICAL"] }
      }
    },
    "components": {
      "type": "object",
      "required": ["cme_kalshi_divergence", "dotplot_dispersion"],
      "properties": {
        "cme_kalshi_divergence": {
          "type": "object",
          "required": ["data"],
          "properties": {
            "data": {
              "type": "object",
              "required": ["gap_pct"],
              "properties": {
                "gap_pct": { "type": "number", "description": "Absolute difference in probabilities" }
              }
            }
          }
        }
      }
    }
  }
}
